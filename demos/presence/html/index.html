<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Presence</title>
    <link href="css/bootstrap-2.0.1.css" rel="stylesheet">
    <link href="css/bootstrap-responsive-2.0.1.css" rel="stylesheet">
  </head>
  <body ng:controller="MainController">
    <div class="container">
      <header id="head">
        <h1>Presence</h1>
        <p class="lead">Use the form below to type your name in and register with presence server</p>
      </header>
      <section id="main">
        <div class="row">
          <div class="span4">
            <form class="well form-inline" ng:submit="connect()">
              <input type="text" name="client.name" placeholder="Client Name" ng:disabled="{{client.status == STATUS_CONNECTED}}" />
              <input type="submit" class="btn btn-primary" value="Connect" ng:show="client.status == STATUS_DISCONNECTED" />
              <a class="btn btn-danger" ng:click="disconnect()" ng:show="client.status == STATUS_CONNECTED">Disconnect</a>
            </form>
          </div>
          <ng:switch on="client.status">
          <div class="span8" ng:switch-when="2">
            <h2>Connecting...</h2>
          </div>
          <div class="span8" ng:switch-when="0">
            <h2>You are connected as {{client.name}}</h2>
            <div class="row" ng:show="client.getPeers().length > 0" ng:repeat="peer in client.getPeers()">
              <div class="span12">
                <h3>
                  {{peer.name}}
                  <ng:switch on="peer.online" >
                    <small class="label label-success" ng:switch-when="true">online</small>
                    <small class="label label-important" ng:switch-when="false">offline</small>
                  </ng:switch>
                </h3>
              </div>
            </div>
            <div class="row" ng:hide="client.getPeers().length > 0">
              <div class="span12">
                <h3>No peers online</h3>
              </div>
            </div>
          </div>
          <div class="span8" ng:switch-when="3">
            <h2>Disconnecting...</h2>
          </div>
          <div class="span8" ng:switch-when="1">
            <h2>You are not connected</h2>
          </div>
          <div class="span8" ng:switch-default>
            <h2>Client status: {{client.status}}</h2>
          </div>
          </ng:switch>
        </div>
      </section>
    </div>
    <script type="text/javascript" src="js/angular-0.9.19.js" ng:autobind></script>
    <script type="text/javascript" src="js/stomp-0.1.0.js"></script>
    <script type="text/javascript" src="js/nullmq-0.1.0.js"></script>
    <script type="text/javascript" src="js/presence-0.1.0.js"></script>
  </body>
</html>